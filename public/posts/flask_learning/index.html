<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><script data-goatcounter=https://goatcounter.lotusssb.com/count async src=//goatcounter.lotusssb.com/count.js></script><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Flask学习 | LOTUS BLOG</title>
<meta name=keywords content><meta name=description content="Flask学习
1.1 配置环境与访问



配置环境



1
2
3


cdvirtualenv 进入虚拟环境
rmvirtualenv 删除虚拟环境
lsvittualenv 列出虚拟环境



自己安装：
进入终端中进入虚拟环境&mdash;&ndash;>



1
2
3


pip list
pip install pymysql
pip install flask==1.0(卸载原来的版本，安装指明的版本)



项目结构介绍：



1
2
3
4


--项目名：
|---static (静态)js css
|---templates(模板)
|--app,py（运行引启动）


新建Flask项目


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12


from flask import Flask

app = Flask(__name__)


@app.route('/')
def hello_world():  # put application's code here
    return '哈哈哈'


if __name__ == '__main__':
    app.run()


路由 URL http://127.0.0.1:5000"><meta name=author content="LOTU$"><link rel=canonical href=https://blog.lotussb.com/posts/flask_learning/><link crossorigin=anonymous href=/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY+IJWZFnspCg=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.lotussb.com/%3C/favicon.ico%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.lotussb.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.lotussb.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.lotussb.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.lotussb.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.lotussb.com/posts/flask_learning/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Flask学习"><meta property="og:description" content="Flask学习
1.1 配置环境与访问



配置环境



1
2
3


cdvirtualenv 进入虚拟环境
rmvirtualenv 删除虚拟环境
lsvittualenv 列出虚拟环境



自己安装：
进入终端中进入虚拟环境&mdash;&ndash;>



1
2
3


pip list
pip install pymysql
pip install flask==1.0(卸载原来的版本，安装指明的版本)



项目结构介绍：



1
2
3
4


--项目名：
|---static (静态)js css
|---templates(模板)
|--app,py（运行引启动）


新建Flask项目


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12


from flask import Flask

app = Flask(__name__)


@app.route('/')
def hello_world():  # put application's code here
    return '哈哈哈'


if __name__ == '__main__':
    app.run()


路由 URL http://127.0.0.1:5000"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.lotussb.com/posts/flask_learning/"><meta property="og:image" content="https://blog.lotussb.com/python-flask-logo.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-06T22:00:08+08:00"><meta property="article:modified_time" content="2023-05-06T22:00:08+08:00"><meta property="og:site_name" content="LOTU$的个人博客"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.lotussb.com/python-flask-logo.jpg"><meta name=twitter:title content="Flask学习"><meta name=twitter:description content="Flask学习
1.1 配置环境与访问



配置环境



1
2
3


cdvirtualenv 进入虚拟环境
rmvirtualenv 删除虚拟环境
lsvittualenv 列出虚拟环境



自己安装：
进入终端中进入虚拟环境&mdash;&ndash;>



1
2
3


pip list
pip install pymysql
pip install flask==1.0(卸载原来的版本，安装指明的版本)



项目结构介绍：



1
2
3
4


--项目名：
|---static (静态)js css
|---templates(模板)
|--app,py（运行引启动）


新建Flask项目


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12


from flask import Flask

app = Flask(__name__)


@app.route('/')
def hello_world():  # put application's code here
    return '哈哈哈'


if __name__ == '__main__':
    app.run()


路由 URL http://127.0.0.1:5000"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.lotussb.com/posts/"},{"@type":"ListItem","position":2,"name":"Flask学习","item":"https://blog.lotussb.com/posts/flask_learning/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Flask学习","name":"Flask学习","description":"Flask学习 1.1 配置环境与访问 配置环境 1 2 3 cdvirtualenv 进入虚拟环境 rmvirtualenv 删除虚拟环境 lsvittualenv 列出虚拟环境 自己安装： 进入终端中进入虚拟环境\u0026mdash;\u0026ndash;\u0026gt; 1 2 3 pip list pip install pymysql pip install flask==1.0(卸载原来的版本，安装指明的版本) 项目结构介绍： 1 2 3 4 --项目名： |---static (静态)js css |---templates(模板) |--app,py（运行引启动） 新建Flask项目\n1 2 3 4 5 6 7 8 9 10 11 12 from flask import Flask app = Flask(__name__) @app.route(\u0026#39;/\u0026#39;) def hello_world(): # put application\u0026#39;s code here return \u0026#39;哈哈哈\u0026#39; if __name__ == \u0026#39;__main__\u0026#39;: app.run() 路由 URL http://127.0.0.1:5000\n","keywords":[],"articleBody":"Flask学习 1.1 配置环境与访问 配置环境 1 2 3 cdvirtualenv 进入虚拟环境 rmvirtualenv 删除虚拟环境 lsvittualenv 列出虚拟环境 自己安装： 进入终端中进入虚拟环境—–\u003e 1 2 3 pip list pip install pymysql pip install flask==1.0(卸载原来的版本，安装指明的版本) 项目结构介绍： 1 2 3 4 --项目名： |---static (静态)js css |---templates(模板) |--app,py（运行引启动） 新建Flask项目\n1 2 3 4 5 6 7 8 9 10 11 12 from flask import Flask app = Flask(__name__) @app.route('/') def hello_world(): # put application's code here return '哈哈哈' if __name__ == '__main__': app.run() 路由 URL http://127.0.0.1:5000\nWSGI: Python Web Server Gateway Interface 是为Python语言定义的Web应用程序\nFlask内置服务器 nginx\napp = Flask(__name__)\nrun(host=‘ip地址’，port=‘端口号’)\nip地址，一个端口号对应的是一个程序\nhttp://192.168.1.5:5000/ 如果host改成: 0.0.0.0 外网可以访问默认情况下只能是本机。\napp.run(host=‘0..0.0’,port=5001， debug=True) debug: 布尔类型的 debug=True 开启了debug调试模式 只要代码改变服务器会重新加载最新的代码 debug=False 默认 代码发生改变不会自动加载 适用于production环境\n注意！这一步在Pycharm可能有坑！\n1.2 Flask请求响应 可以另起settings来实现ENV环境\n设置 设置配置文件： settings 配置文件\n1 2 ENV 'development' DEBUG True 路由的请求和响应： 浏览器地址栏输入的内容：http://192.168.1.5:8000/index —-\u003e 服务器 —–\u003eapp—–\u003e 有没有这个路由 —-\u003e 就会执行路由匹配的函数——\u003e return’heLL0 world’ —–\u003e response——\u003e 客户端的浏览器\n请求：request http协议： request请求 请求行： 请求地址：http://0.0.0.0:8000/index 请求方法是什么？ method:get post 请求头： key:value 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7 Accept-Encoding: gzip, deflate, br Accept-Language: zh-CN,zh;q=0.9 Cache-Control: max-age=0 Connection: keep-alive Host: 127.0.0.1:5000 Sec-Ch-Ua: \"Google Chrome\";v=\"113\", \"Chromium\";v=\"113\", \"Not-A.Brand\";v=\"24\" Sec-Ch-Ua-Mobile: ?0 Sec-Ch-Ua-Platform: \"Windows\" Sec-Fetch-Dest: document Sec-Fetch-Mode: navigate Sec-Fetch-Site: none Sec-Fetch-User: ?1 Upgrade-Insecure-Requests: 1 User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 response 响应 响应行：状态码 200 ok,404 not found,500 服务器端错误(Server Internal Error),302 状态码302表示重定向。它是指请求的资源已被分配到新的URL上\n1 2 3 4 5 响应头 Content-Length:18 Content-Type:text/html;charset=utf-8 Date:Mon,18 May 2020 08:57:02 GMT Server:Werkzeug/1.0.1 Python/3.7.4 响应体：\n1 ","wordCount":"1049","inLanguage":"en","image":"https://blog.lotussb.com/python-flask-logo.jpg","datePublished":"2023-05-06T22:00:08+08:00","dateModified":"2023-05-06T22:00:08+08:00","author":{"@type":"Person","name":"LOTU$"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.lotussb.com/posts/flask_learning/"},"publisher":{"@type":"Organization","name":"LOTUS BLOG","logo":{"@type":"ImageObject","url":"https://blog.lotussb.com/%3C/favicon.ico%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.lotussb.com/ accesskey=h title="LOTUS BLOG (Alt + H)"><img src=https://blog.lotussb.com/apple-touch-icon.png alt aria-label=logo height=35>LOTUS BLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.lotussb.com/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://blog.lotussb.com/archives/ title=归档><span>归档</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.lotussb.com/>Home</a>&nbsp;»&nbsp;<a href=https://blog.lotussb.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Flask学习</h1><div class=post-meta><span title='2023-05-06 22:00:08 +0800 CST'>May 6, 2023</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;1049 words&nbsp;·&nbsp;LOTU$</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#11-配置环境与访问>1.1 配置环境与访问</a></li><li><a href=#12-flask请求响应>1.2 Flask请求响应</a></li><li><a href=#13-flask的路由和变量规则>1.3 Flask的路由和变量规则</a></li><li><a href=#14-flask的变量规则和相应对象>1.4 Flask的变量规则和相应对象</a><ul><li><a href=#路由的变量规则>路由的变量规则：</a></li><li><a href=#response对象>response对象</a></li><li><a href=#request对象>request对象</a></li><li><a href=#重定向和url>重定向和url</a></li><li><a href=#模板>模板</a></li><li><a href=#复习和自定义过滤器>复习和自定义过滤器</a></li><li><a href=#flask模板继承和inlcude>flask模板继承和inlcude</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h1 id=flask学习>Flask学习<a hidden class=anchor aria-hidden=true href=#flask学习>#</a></h1><h2 id=11-配置环境与访问>1.1 配置环境与访问<a hidden class=anchor aria-hidden=true href=#11-配置环境与访问>#</a></h2><p><img loading=lazy src=20230506220727.png alt></p><ol><li>配置环境</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cdvirtualenv 进入虚拟环境
</span></span><span class=line><span class=cl>rmvirtualenv 删除虚拟环境
</span></span><span class=line><span class=cl>lsvittualenv 列出虚拟环境
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>自己安装：
进入终端中进入虚拟环境&mdash;&ndash;></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip list
</span></span><span class=line><span class=cl>pip install pymysql
</span></span><span class=line><span class=cl>pip install <span class=nv>flask</span><span class=o>==</span>1.0<span class=o>(</span>卸载原来的版本，安装指明的版本<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>项目结构介绍：</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>--项目名：
</span></span><span class=line><span class=cl><span class=p>|</span>---static <span class=o>(</span>静态<span class=o>)</span>js css
</span></span><span class=line><span class=cl><span class=p>|</span>---templates<span class=o>(</span>模板<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=p>|</span>--app,py（运行引启动）
</span></span></code></pre></td></tr></table></div></div><p>新建Flask项目</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello_world</span><span class=p>():</span>  <span class=c1># put application&#39;s code here</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;哈哈哈&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>路由 URL <a href=http://127.0.0.1:5000>http://127.0.0.1:5000</a></strong></p><p><strong>WSGI: Python Web Server Gateway Interface 是为Python语言定义的Web应用程序</strong></p><p><strong>Flask内置服务器 nginx</strong></p><p><img loading=lazy src=20230506222841.png alt></p><p><code>app = Flask(__name__)</code></p><p>run(host=&lsquo;ip地址’，port=&lsquo;端口号&rsquo;)</p><p>ip地址，一个端口号对应的是一个程序</p><p><a href=http://192.168.1.5:5000/>http://192.168.1.5:5000/</a> 如果host改成: 0.0.0.0 外网可以访问默认情况下只能是本机。</p><p>app.run(host=&lsquo;0..0.0&rsquo;,port=5001， debug=True)
debug: 布尔类型的
debug=True 开启了debug调试模式 只要代码改变服务器会重新加载最新的代码
debug=False 默认 代码发生改变不会自动加载 适用于production环境</p><p><strong>注意！这一步在Pycharm可能有坑！</strong></p><h2 id=12-flask请求响应>1.2 Flask请求响应<a hidden class=anchor aria-hidden=true href=#12-flask请求响应>#</a></h2><p>可以另起settings来实现ENV环境</p><p>设置
设置配置文件：
<code>settings</code>
配置文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ENV <span class=s1>&#39;development&#39;</span>
</span></span><span class=line><span class=cl>DEBUG True
</span></span></code></pre></td></tr></table></div></div><p>路由的请求和响应：
浏览器地址栏输入的内容：<a href=http://192.168.1.5:8000/index>http://192.168.1.5:8000/index</a>
&mdash;-> 服务器 &mdash;&ndash;>app&mdash;&ndash;> 有没有这个路由
&mdash;-> 就会执行路由匹配的函数&mdash;&mdash;> return&rsquo;heLL0 world&rsquo;
&mdash;&ndash;> response&mdash;&mdash;> 客户端的浏览器</p><p>请求：request
http协议：
request请求
请求行：
请求地址：<a href=http://0.0.0.0:8000/index>http://0.0.0.0:8000/index</a>
请求方法是什么？ method:get post
请求头： key:value
<img loading=lazy src=20230506225001.png alt></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Accept:
</span></span><span class=line><span class=cl>text/html,application/xhtml+xml,application/xml<span class=p>;</span><span class=nv>q</span><span class=o>=</span>0.9,image/avif,image/webp,image/apng,*/*<span class=p>;</span><span class=nv>q</span><span class=o>=</span>0.8,application/signed-exchange<span class=p>;</span><span class=nv>v</span><span class=o>=</span>b3<span class=p>;</span><span class=nv>q</span><span class=o>=</span>0.7
</span></span><span class=line><span class=cl>Accept-Encoding:
</span></span><span class=line><span class=cl>gzip, deflate, br
</span></span><span class=line><span class=cl>Accept-Language:
</span></span><span class=line><span class=cl>zh-CN,zh<span class=p>;</span><span class=nv>q</span><span class=o>=</span>0.9
</span></span><span class=line><span class=cl>Cache-Control:
</span></span><span class=line><span class=cl>max-age<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>Connection:
</span></span><span class=line><span class=cl>keep-alive
</span></span><span class=line><span class=cl>Host:
</span></span><span class=line><span class=cl>127.0.0.1:5000
</span></span><span class=line><span class=cl>Sec-Ch-Ua:
</span></span><span class=line><span class=cl><span class=s2>&#34;Google Chrome&#34;</span><span class=p>;</span><span class=nv>v</span><span class=o>=</span><span class=s2>&#34;113&#34;</span>, <span class=s2>&#34;Chromium&#34;</span><span class=p>;</span><span class=nv>v</span><span class=o>=</span><span class=s2>&#34;113&#34;</span>, <span class=s2>&#34;Not-A.Brand&#34;</span><span class=p>;</span><span class=nv>v</span><span class=o>=</span><span class=s2>&#34;24&#34;</span>
</span></span><span class=line><span class=cl>Sec-Ch-Ua-Mobile:
</span></span><span class=line><span class=cl>?0
</span></span><span class=line><span class=cl>Sec-Ch-Ua-Platform:
</span></span><span class=line><span class=cl><span class=s2>&#34;Windows&#34;</span>
</span></span><span class=line><span class=cl>Sec-Fetch-Dest:
</span></span><span class=line><span class=cl>document
</span></span><span class=line><span class=cl>Sec-Fetch-Mode:
</span></span><span class=line><span class=cl>navigate
</span></span><span class=line><span class=cl>Sec-Fetch-Site:
</span></span><span class=line><span class=cl>none
</span></span><span class=line><span class=cl>Sec-Fetch-User:
</span></span><span class=line><span class=cl>?1
</span></span><span class=line><span class=cl>Upgrade-Insecure-Requests:
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl>User-Agent:
</span></span><span class=line><span class=cl>Mozilla/5.0 <span class=o>(</span>Windows NT 10.0<span class=p>;</span> Win64<span class=p>;</span> x64<span class=o>)</span> AppleWebKit/537.36 <span class=o>(</span>KHTML, like Gecko<span class=o>)</span> Chrome/113.0.0.0 Safari/537.36
</span></span></code></pre></td></tr></table></div></div><p>response
响应
响应行：状态码
200 ok,404 not found,500 服务器端错误(Server Internal Error),302 状态码302表示重定向。它是指请求的资源已被分配到新的URL上</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>响应头
</span></span><span class=line><span class=cl>Content-Length:18
</span></span><span class=line><span class=cl>Content-Type:text/html<span class=p>;</span><span class=nv>charset</span><span class=o>=</span>utf-8
</span></span><span class=line><span class=cl>Date:Mon,18 May <span class=m>2020</span> 08:57:02 GMT
</span></span><span class=line><span class=cl>Server:Werkzeug/1.0.1 Python/3.7.4
</span></span></code></pre></td></tr></table></div></div><p>响应体：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;font <span class=nv>color</span><span class=o>=</span><span class=s2>&#34;red&#34;</span>&gt;Hello World333333!&lt;/font&gt;
</span></span></code></pre></td></tr></table></div></div><p><font color=red>Hello World333333!</font></p><h2 id=13-flask的路由和变量规则>1.3 Flask的路由和变量规则<a hidden class=anchor aria-hidden=true href=#13-flask的路由和变量规则>#</a></h2><p>settings配置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>ENV</span> <span class=o>=</span> <span class=s1>&#39;development&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>DEBUG</span> <span class=o>=</span> True
</span></span></code></pre></td></tr></table></div></div><p>另配置文件生效
<code>app.config.from_object(settings)</code></p><p>route就是路由</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>def index<span class=o>()</span>:
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;welcome everyone!&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>app.add_url_rule<span class=o>(</span><span class=s1>&#39;/index&#39;</span>, <span class=nv>view_func</span><span class=o>=</span>index<span class=o>)</span> <span class=c1>#这两行代码表示内容相同</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>route:
</span></span><span class=line><span class=cl>def route<span class=o>(</span>self,rule,**options<span class=o>)</span>: 
</span></span><span class=line><span class=cl>    def decorator<span class=o>(</span>f<span class=o>)</span>:
</span></span><span class=line><span class=cl>        self.add_url_rule<span class=o>(</span>rule, endpoint, f,**options<span class=o>)</span> 
</span></span><span class=line><span class=cl>        <span class=k>return</span> f
</span></span><span class=line><span class=cl>    <span class=k>return</span> decorator
</span></span></code></pre></td></tr></table></div></div><p>这个装饰器其实就是将rule字符串跟视图函数进行了绑定，通过<code>add＿url＿rule()</code>实现的绑定</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/index&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def index<span class=o>()</span>:
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;welcome everyone!&#39;</span> 
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>data</span> <span class=o>=</span> <span class=o>{</span><span class=s1>&#39;a&#39;</span> : <span class=s1>&#39;北京&#39;</span>,<span class=s1>&#39;b&#39;</span> : <span class=s1>&#39;上海&#39;</span>,<span class=s1>&#39;c&#39;</span> : <span class=s1>&#39;深圳&#39;</span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/getcity/&lt;key&gt;&#39;</span><span class=o>)</span> <span class=c1>#key就是一个变量名，默认是字符串类型的</span>
</span></span><span class=line><span class=cl>def get_city<span class=o>(</span>key<span class=o>)</span>:
</span></span><span class=line><span class=cl>    print<span class=o>(</span>type<span class=o>(</span>key<span class=o>))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> data.get<span class=o>(</span>key<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>在浏览器中输入 <a href=http://0.0.0.0:5000/getcity/a>http://0.0.0.0:5000/getcity/a</a> 打印出北京</strong></p><p><strong>同理，输入 <a href=http://0.0.0.0:5000/getcity/b>http://0.0.0.0:5000/getcity/b</a> 打印出上海</strong></p><p><img loading=lazy src=20230507200257.png alt></p><p><img loading=lazy src=20230507200328.png alt></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/add/&lt;int:num&gt;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def add<span class=o>(</span>num<span class=o>)</span>:
</span></span><span class=line><span class=cl>    <span class=nv>result</span> <span class=o>=</span> num + <span class=m>18</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>(</span>result<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>进入<a href=http://0.0.0.0:5000/add/15>http://0.0.0.0:5000/add/15</a>
此时会报错，在DEBUG页显示</p><p><img loading=lazy src=20230507201129.png alt></p><p>返回类型必须是字符串、字典、列表、带有标题或状态的元组、响应实例或可调用的 WSGI，但它是一个 int。</p><p>则我们需要把<code>result</code>进行转换</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/add/&lt;int:num&gt;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def add<span class=o>(</span>num<span class=o>)</span>:
</span></span><span class=line><span class=cl>    <span class=nv>result</span> <span class=o>=</span> num + <span class=m>18</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> str<span class=o>(</span>result<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>进入<a href=http://0.0.0.0:5000/add/15>http://0.0.0.0:5000/add/15</a></p><p><img loading=lazy src=20230507201342.png alt>
<strong>正常显示</strong></p><h2 id=14-flask的变量规则和相应对象>1.4 Flask的变量规则和相应对象<a hidden class=anchor aria-hidden=true href=#14-flask的变量规则和相应对象>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/add1/&lt;float:money&gt;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def add1<span class=o>(</span>money<span class=o>)</span>: <span class=c1>#注意！是add1！！！</span>
</span></span><span class=line><span class=cl>    print<span class=o>(</span><span class=s1>&#39;---&gt;&#39;</span>, type<span class=o>(</span>money<span class=o>))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> str<span class=o>(</span>money<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=20230507202111.png alt></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/index/&lt;path:p&gt;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def get_path<span class=o>(</span>p<span class=o>)</span>:
</span></span><span class=line><span class=cl>    print<span class=o>(</span><span class=s1>&#39;---&gt;&#39;</span>, type<span class=o>(</span>p<span class=o>))</span> <span class=c1>#p是字符串(str)类型的</span>
</span></span><span class=line><span class=cl>    print<span class=o>(</span>p<span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> p
</span></span></code></pre></td></tr></table></div></div><p>进入 <a href=http://0.0.0.0:5000/index/first/a1/111>http://0.0.0.0:5000/index/first/a1/111</a></p><p>得到</p><p><img loading=lazy src=20230507202512.png alt></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/test/&lt;uuid:id&gt;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def test<span class=o>(</span>id<span class=o>)</span>
</span></span><span class=line><span class=cl>    print<span class=o>(</span><span class=s1>&#39;#####&gt;&gt;&gt;&#39;</span>,type<span class=o>(</span>id<span class=o>))</span> <span class=c1>#传值要符合uuid的格式才行 uuid模块 uuid.uuid4()-----&gt;UUID类型</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;获取唯一的标识码&#39;</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>import uuid
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>uid</span> <span class=o>=</span> uuid.uuid4<span class=o>()</span>
</span></span><span class=line><span class=cl>print<span class=o>(</span>uid<span class=o>)</span>
</span></span><span class=line><span class=cl>print<span class=o>(</span>type<span class=o>(</span>uid<span class=o>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>uid1</span> <span class=o>=</span> str<span class=o>(</span>uid<span class=o>)</span>
</span></span><span class=line><span class=cl>print<span class=o>(</span>type<span class=o>(</span>uid1<span class=o>))</span>
</span></span><span class=line><span class=cl><span class=nv>uid1</span> <span class=o>=</span> uid1.replace<span class=o>(</span><span class=s1>&#39;-&#39;</span>,<span class=s1>&#39;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>print<span class=o>(</span>uid1<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>进入 <a href=http://0.0.0.0:5000/index/first/a1/111>http://0.0.0.0:5000/test/</a></p><h3 id=路由的变量规则>路由的变量规则：<a hidden class=anchor aria-hidden=true href=#路由的变量规则>#</a></h3><p>string |（缺省值）接受任何不包含斜杠的文本
int 接受正整数
float 接受正浮点数
path 类似 string，但可以包含斜杠
uuid 接受 UUID 字符串</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/getcity/&lt;key&gt;&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def get_city<span class=o>(</span>key<span class=o>)</span>: <span class=c1>#参数是必须添加的</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> data.get<span class=o>(</span>key<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=response对象>response对象<a hidden class=anchor aria-hidden=true href=#response对象>#</a></h3><p><img loading=lazy src=20230510002111.png alt></p><p>return 返回的字符串其实是做了一个response对象的封装，最终返回的还是response对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>from flask import Flask
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>app</span> <span class=o>=</span> Flask<span class=o>(</span>__name__<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/index2&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def index2<span class=o>()</span>:
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;hello&#39;</span>, <span class=m>200</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=20230510002953.png alt></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>from flask import Flask
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>app</span> <span class=o>=</span> Flask<span class=o>(</span>__name__<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/index2&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def index2<span class=o>()</span>:
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;sorry!page not found!&#39;</span>, <span class=m>404</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=20230510003119.png alt></p><p><strong>可以自定义返回值</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>from flask import Flask, make_response
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>app</span> <span class=o>=</span> Flask<span class=o>(</span>__name__<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/index2&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def index2<span class=o>()</span>:
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;sorry!page not found!&#39;</span>, <span class=m>404</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@app.route<span class=o>(</span><span class=s1>&#39;/index4&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>def index4<span class=o>()</span>:
</span></span><span class=line><span class=cl>    <span class=nv>content</span> <span class=o>=</span> <span class=s1>&#39;&#39;&#39;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;!DOCTYPE html&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;html lang=&#34;en&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;head&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;meta charset=&#34;UTF-8&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;title&gt;首页&lt;/title&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;style&gt;
</span></span></span><span class=line><span class=cl><span class=s1>        div {
</span></span></span><span class=line><span class=cl><span class=s1>            width: 100%;
</span></span></span><span class=line><span class=cl><span class=s1>            height: 100px;
</span></span></span><span class=line><span class=cl><span class=s1>            border: 2px solid red;
</span></span></span><span class=line><span class=cl><span class=s1>        }
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;/style&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;/head&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;body&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;h1&gt;欢迎来到测试购物网站&lt;/h1&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;ul&gt;
</span></span></span><span class=line><span class=cl><span class=s1>        &lt;li&gt;hello&lt;/li&gt;
</span></span></span><span class=line><span class=cl><span class=s1>        &lt;li&gt;abc&lt;/li&gt;
</span></span></span><span class=line><span class=cl><span class=s1>        &lt;li&gt;world&lt;/li&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;/ul&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;/body&gt;
</span></span></span><span class=line><span class=cl><span class=s1>&lt;/html&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &#39;&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=nv>reponse</span> <span class=o>=</span> make_response<span class=o>(</span>content<span class=o>)</span>  <span class=c1>#返回值就是一个response对象</span>
</span></span><span class=line><span class=cl>    reponse.headers<span class=o>[</span><span class=s1>&#39;mytest&#39;</span><span class=o>]</span> <span class=o>=</span> <span class=s1>&#39;123abc&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> reponse
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nv>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span>:
</span></span><span class=line><span class=cl>    app.run<span class=o>()</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=20230510004602.png alt></p><p><img loading=lazy src=20230510004753.png alt></p><p>返回值:
response响应对象</p><h3 id=request对象>request对象<a hidden class=anchor aria-hidden=true href=#request对象>#</a></h3><p>参数:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/register&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>register</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>r</span> <span class=o>=</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;register.html&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>r</span>
</span></span></code></pre></td></tr></table></div></div><p>模板:
需要把模板放到templates目录下
<img loading=lazy src=20230616214240.png alt></p><h3 id=重定向和url>重定向和url<a hidden class=anchor aria-hidden=true href=#重定向和url>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s1>&#39;/register&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span><span class=s1>&#39;POST&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>register</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>method</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>request</span><span class=o>.</span><span class=n>method</span> <span class=o>==</span> <span class=s1>&#39;POST&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>username</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;username&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>password</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;password&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>repassword</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>form</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;repassword&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1>#用户密码一致性验证</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>password</span> <span class=o>==</span> <span class=n>repassword</span><span class=p>:</span>
</span></span><span class=line><span class=cl>             <span class=c1>#保存用户</span>
</span></span><span class=line><span class=cl>            <span class=n>user</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;username&#39;</span><span class=p>:</span> <span class=n>username</span><span class=p>,</span> <span class=s1>&#39;password&#39;</span> <span class=p>:</span> <span class=n>password</span><span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>users</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>user</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>redirect</span><span class=p>(</span><span class=s1>&#39;/&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>         <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>             <span class=k>return</span> <span class=s1>&#39;两次密码不一致&#39;</span>
</span></span><span class=line><span class=cl>         
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>render_template</span><span class=p>(</span><span class=s1>&#39;register.html&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=20230622171637.png alt></p><p>视图函数的返回值：
response响应：</p><ol><li>str 自动转成response对象</li><li>dict json</li><li>response对象 response对象</li><li>make_response() response对象</li><li>redirect() 重定向 302状态码</li><li>render_template()| 模板渲染 ＋ 模板</li></ol><h3 id=模板>模板<a hidden class=anchor aria-hidden=true href=#模板>#</a></h3><p><a href="https://docs.jinkan.org/docs/flask/templating.html?highlight=%E6%A8%A1%E6%9D%BF">模板介绍(jinja2)</a></p><p>模板：(网页)
模板的语法：</p><ol><li>在模板重获取view中传递的变量值: {{ 变量名key }}</li></ol><p>render_template(&lsquo;模板名字&rsquo;,key=value,key=value)</p><pre><code>name = 'python' #字符串
age = 18  #整型
friends = ['a','b','c'] #列表
dict1 = {'a':1,'b':2,'c':3} #字典
#创建对象
girlfrind = GirlFriend('小红','河南郑州') #自定义类构造的类型，Girl对象
</code></pre><p>模板:
{{ list.0 }} 同 {{ list[0] }}
{{ dict.key }} 同 {{ dict.get(key) }}
{{ girl.name }} 同 {{ 对象.属性 }}</p><ol start=2><li>控制块:
{% if 条件表达式 %}
{% elif 条件表达式 %}
{% else %}
{% endif %}</li></ol><p>{% for 变量 in 可迭代对象 %}
{% endfor %}</p><p>{% while 条件表达式 %}
{% endwhile %}</p><p>{% break %}
{% continue %}</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=o>&lt;</span><span class=n>ul</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=o>%</span><span class=k>for</span> <span class=n>girl</span> <span class=ow>in</span> <span class=n>girls</span><span class=o>%</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>&lt;</span><span class=n>li</span><span class=o>&gt;</span><span class=p>{{</span><span class=n>gir</span><span class=p>}}</span><span class=o>&lt;/</span><span class=n>i</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=o>%</span> <span class=n>end</span> <span class=k>for</span><span class=o>%</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>ul</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>可以使用Loop变量
Loop.index 序号从1开始
Loop.index0 序号从0开始
Loop.revindex reverse 序号是倒着的
Loop.revindex0
loop.first 布尔类型 是否是第一行
Loop.Last 布尔类型 是否是第二行</p><p>3.过滤器
过滤器的本质就是函数
模板语法中过滤器：
{{变量名 ｜ 过滤器(＊args)}}{{变量名 ｜ 过滤器}}</p><p>常见的过滤器：</p><ol><li>safe:
禁用转译</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>msg ＝<span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>520快乐！<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>return render_template(&#39;show_2.html&#39;, girls=girls,users=users, msg=msg) 
</span></span></code></pre></td></tr></table></div></div><p>不想让其转译：
{{ msg | safe }}
2. capitalize：单词的首字母大写 {{ n1 | capitalize }}</p><ol start=3><li>Lower和upper
大小写的转换</li><li>title: 每个单词的首字母大写
msg = &lsquo;hello world&rsquo;
{{ msg | title }}</li><li>reverse: 字符串反转
msg = &lsquo;hello world&rsquo;
{{ msg | reverse }}</li><li>format
格式化字符串
msg = &lsquo;hello {0} {1}&rsquo;
{{ msg | format(&lsquo;python&rsquo;,&lsquo;520&rsquo;) }}</li><li>truncate: 字符串截取
msg = &lsquo;hello world&rsquo;
{{ msg | truncate(5) }}</li></ol><p>list的操作
list的操作：
{#列表过滤器的使用#}
{{ girls | first }}<br>{{ girls | Last}}<br>{{ girls | length }}<br>{#{{girls | sum}}# 整型的计算}
{{ [1,3,5,7,9] | sum }-}<br>{{ [1,8,5,7,3] | sort }}<br></p><p>dict：
{% for v in users.0.values() %} &mdash;->获取值</p><p>{{ v }}</p>{% endfo r%}<hr>{% for k in users.0.keys() %} ---->获取键<p>{{ k }}</p>{% endfor %}<hr>｛% for k，v in users．0．items（）%｝ --->获取键值<p>-{{ k }}---{{ v }}</p>{% endfor %}<h3 id=复习和自定义过滤器>复习和自定义过滤器<a hidden class=anchor aria-hidden=true href=#复习和自定义过滤器>#</a></h3><p>request
request.method &mdash;-> app.url_map request.args
request.form</p><p>response</p><ol><li>字符串</li><li>字典</li><li>tuple</li><li>response对象</li><li>make_response()</li><li>render_template()</li><li>redirect() &mdash;> response 重定向
render＿template（＇模板名字＇，＊＊context）
render＿template（＇模板名字＇，name＝nameage＝age，&mldr;）</li></ol><p>模板语法：</p><ol><li><p>变量
{{ name }}
{{ age }}
字符串
列表
tuple
set
对象&mdash;-＞［s1，s2，s3］
&mdash;&ndash;>[{},{},{}]</p></li><li><p>过滤器：本质就是函数
通过flask模块中的add＿template＿filter方法
a. 定义函数，带有参数和返回值
b. 添加过滤器 app.add_template_filter(function1,name=&rsquo;&rsquo;)
c. 在模板中使用过滤器 {{ 变量名 | 过滤器名 }}
使用装饰器完成
a. 定义函数，带有参数和返回值
b. 通过装饰器完成，@app.template_filter（&lsquo;过滤器名字&rsquo;）装饰步骤一的函数
c. 在模板中使用： {{f 变量 | 自定义过滤器 }}</p></li></ol><p><strong>模板：复用(举例：购物网站多个页面上下框架一样，只有中间内容不一样)</strong>
模板继承 *
include</p><h3 id=flask模板继承和inlcude>flask模板继承和inlcude<a hidden class=anchor aria-hidden=true href=#flask模板继承和inlcude>#</a></h3></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://blog.lotussb.com/posts/autogpt_experience/><span class=title>« Prev</span><br><span>AutoGPT体验</span>
</a><a class=next href=https://blog.lotussb.com/posts/web3_learing/><span class=title>Next »</span><br><span>Web3学习</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://blog.lotussb.com/>LOTUS BLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>